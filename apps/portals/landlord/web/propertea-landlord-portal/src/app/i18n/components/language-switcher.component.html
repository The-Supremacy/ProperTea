<div class="language-switcher">
  <!-- Collapsed: Show current language + expand button -->
  @if (!isExpanded()) {
    <div
      class="language-current"
      (click)="toggleExpanded()"
      role="button"
      tabindex="0"
      [attr.aria-label]="'Expand language options'"
    >
      <span class="text-xl">{{ currentLanguage()?.flag }}</span>
      <span class="language-name">{{ currentLanguage()?.name }}</span>
      <i class="pi pi-chevron-down ml-auto"></i>
    </div>
  }

  <!-- Expanded: Show all languages -->
  @if (isExpanded()) {
    <div class="language-list">
      @for (lang of languages; track lang.code) {
        <div
          class="language-option"
          [class.active]="activeLang() === lang.code"
          (click)="selectLanguage(lang.code)"
          role="button"
          [attr.aria-label]="lang.name"
          tabindex="0"
        >
          <span class="text-xl">{{ lang.flag }}</span>
          <span class="language-name">{{ lang.name }}</span>
          @if (activeLang() === lang.code) {
            <i class="pi pi-check ml-auto"></i>
          }
        </div>
      }
    </div>
  }
</div>
