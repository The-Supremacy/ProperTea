# Longhorn base Helm values — env-agnostic settings.
# These are the structural defaults shared across all environments.
# Environment-specific overrides (replica count, default class) live in
# deploy/environments/<env>/longhorn-values.yaml

# Required for ArgoCD deployments: disables the pre-upgrade Helm hook job.
# The hook fires before the ServiceAccount exists on first install, causing
# a forbidden error. Longhorn's own ArgoCD docs mandate this setting.
# See: https://longhorn.io/docs/1.8.1/deploy/install/install-with-argocd/
preUpgradeChecker:
  jobEnabled: false

defaultSettings:
  # Replica auto-balance redistributes replicas to use newly added nodes.
  # Does not increase replica count — only rebalances existing replicas.
  replicaAutoBalance: least-effort

  # Minimum available storage % before Longhorn refuses to schedule new replicas.
  storageMinimalAvailablePercentage: 20

persistence:
  # Do not set defaultClass here — controlled per environment.
  defaultClass: false
